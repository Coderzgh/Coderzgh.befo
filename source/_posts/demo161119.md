---
title: mac下无法远程桌面连接windows sever2016 base的解决办法

tags: vps运维
---
又一次掉坑里

<!-- more -->

<center>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="http://music.163.com/outchain/player?type=2&id=26620762&auto=1&height=66">
</iframe>
</center>
## Mac下利用MS Remote Desktop Connection 连接windows sever服务器失败

### 起因：
1. 今天突然想把一些做渗透测试的软件放到服务器上去跑，一方面可以不暴露我的真实ip，另外就是不用在本地去开虚拟机去跑，因为真的很慢（对于Mac用户来说）。
2. 一直使用的都是基于Linux发行版本的各个操作系统，心血来潮想来用下win sever，结果入了坑。 

### 问题描述：
1. 兴高采烈的从MS官网下载Remote Desktop Connection Mac版客户端（其实以前有装，office套件中就有，一直没有用就被我卸载了）。
2. 在AWS上启动好实例后，直接连接，发现失败，报错信息是：远程桌面连接无法验证您希望连接的计算机的身份。。。巴啦吧啦。
3.  盆友拿去连接发现也上不去，自己却在虚拟机win7中测试没有问题。
4.  看来是Mac上除了问题，不在客户端，就在防火墙，检查防火墙，添加软件的允许传入连接。然后测试，还是GG。。。
5.  最后终于找到了解决方案

### 问题解决（以下操作均在服务器中）：
1. 先查看防火墙是否打开，是否去掉“仅允许运行使用网络级别身份验证的远程计算机…”（for windows）。
2. 如果还是不行的话。便需要开启组策略中远程桌面链接安全层：
  1. 开始-运行-gpedit.msc，进入组策略编辑器。
  2. 在左侧边栏中展开，计算机配置-管理模板-Windows组件-远程桌面服务-远程桌面会话主机-安全，修改以下两项。
    第一，远程（RDP）连接要求使用指定的安全层，改为启用，安全层选择RDP。
    第二,要求使用网络级别的身份验证对远程连接的用户进行身份验证，改为禁用。
  3. 关闭组策略编辑器，重启即可。

### 失败原因： 

1. 之前从未使用过微软的远程桌面连接，手上所维护的几台VPS都是基于Linux发行版本的操作系统
2. 还有就是犯了一个新人容易犯大忌，一些软件，包括系统，没有采用成熟稳定的版本，而是采用最新版本，这样就容易发生这样或者那样的兼容性问题
3. 博客好久没更，总是不善于总结，哈哈



